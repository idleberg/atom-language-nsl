module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){e.exports=require("path")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("util")},function(e,t,n){var r,o;({readManifestSync:o}=n(4)),o("language-nsl"),e.exports=r={isPathSetup:function(){var e,t;return({access:e,constants:t}=n(1)),e(atom.config.get("language-nsl.pathToJar"),t.R_OK|t.W_OK,(function(e){var t;if(e)return t=atom.notifications.addWarning("**language-nsl**: No valid `nsL.jar` was specified in your settings",{dismissable:!0,buttons:[{text:"Open Settings",className:"icon icon-gear",onDidClick:function(){return atom.workspace.open("atom://config/packages/language-nsl",{pending:!0,searchAllPanes:!0}),t.dismiss()}},{text:"Ignore",onDidClick:function(){return atom.config.set("language-nsl.mutePathWarning",!0),t.dismiss()}}]})}))},notifyOnSucess:function(){var e;if(atom.config.get("language-nsl.showBuildNotifications"))return e=atom.notifications.addSuccess("Transpiled successfully",{dismissable:!0,buttons:[{text:"Open",className:"icon icon-pencil",onDidClick:function(){return r.openScript(),e.dismiss()}},{text:"Cancel",onDidClick:function(){return e.dismiss()}}]})},openScript:function(){var e,t,r,o,s,i,a;return({basename:e,dirname:t,extname:o,join:s}=n(0)),i=s(t(r=null!=(a=atom.workspace.getActiveTextEditor().buffer)?a.file.path:void 0),e(r,o(r))+".nsi"),atom.workspace.open(i)}}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,s){function i(e){try{c(r.next(e))}catch(e){s(e)}}function a(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(i,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},s=this;Object.defineProperty(t,"__esModule",{value:!0});n(7);var i=n(2).promisify,a=n(1),c=a.readFile,l=a.readFileSync,u=n(0),f=(u.join,u.resolve),p=i(c);t.readManifest=function(e){return r(s,void 0,void 0,(function(){var t,n,r;return o(this,(function(o){switch(o.label){case 0:n=atom.packages.resolvePackagePath(e),t=f(n,"package.json"),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,p(t,"utf8")];case 2:return r=o.sent(),[2,JSON.parse(r)];case 3:return o.sent(),[2,null];case 4:return[2]}}))}))};t.readManifestSync=function(e){var t,n=atom.packages.resolvePackagePath(e);t=f(n,"package.json");try{var r=l(t,"utf8");return JSON.parse(r)}catch(e){return null}}},function(e,t,n){var r;({satisfyDependencies:r}="atom-satisfy-dependencies"),e.exports={config:{pathToJar:{title:"Path To JAR",description:"Specify the full path to `nsL.jar`",type:"string",default:"",order:0},mutePathWarning:{title:"Mute Path Warning",description:"When enabled, warnings about missing path to `nsL.jar` will be muted",type:"boolean",default:!1,order:1},customArguments:{title:"Custom Arguments",description:"Specify your preferred arguments for nsL Assembler, separated by commas",type:"string",default:["/nomake","/nopause"],items:{type:"string"},order:2},alwaysShowOutput:{title:"Always Show Output",description:"Displays compiler output in console panel. When deactivated, it will only show on errors",type:"boolean",default:!0,order:3},showBuildNotifications:{title:"Show Build Notifications",description:"Displays color-coded notifications that close automatically after 5 seconds",type:"boolean",default:!0,order:4},clearConsole:{title:"Clear Console",description:"When `console-panel` isn't available, build logs will be printed using `console.log()`. This setting clears the console prior to building.",type:"boolean",default:!0,order:5},manageDependencies:{title:"Manage Dependencies",description:"When enabled, third-party dependencies will be installed automatically",type:"boolean",default:!0,order:6}},subscriptions:null,activate:function(e){var t,o,s;if(({CompositeDisposable:t}=n(6)),({isPathSetup:o,satisfyDependencies:r}=n(3)),({transpile:s}=n(13)),this.subscriptions=new t,this.subscriptions.add(atom.commands.add("atom-workspace",{"nsl-assembler:save-&-transpile":()=>s(this.consolePanel)})),!0===atom.config.get("language-nsl.manageDependencies")&&r(),!1===atom.config.get("language-nsl.mutePathWarning"))return o()},deactivate:function(){var e;return null!=(e=this.subscriptions)&&e.dispose(),this.subscriptions=null},consumeConsolePanel:function(e){this.consolePanel=e}}},function(e,t){e.exports=require("atom")},function(e,t,n){"use strict";const r=n(0),o=n(8),s=n(12),i=Symbol("findUp.stop");e.exports=async(e,t={})=>{let n=r.resolve(t.cwd||"");const{root:s}=r.parse(n),a=[].concat(e),c=async t=>{if("function"!=typeof e)return o(a,t);const n=await e(t.cwd);return"string"==typeof n?o([n],t):n};for(;;){const e=await c({...t,cwd:n});if(e===i)return;if(e)return r.resolve(n,e);if(n===s)return;n=r.dirname(n)}},e.exports.sync=(e,t={})=>{let n=r.resolve(t.cwd||"");const{root:s}=r.parse(n),a=[].concat(e),c=t=>{if("function"!=typeof e)return o.sync(a,t);const n=e(t.cwd);return"string"==typeof n?o.sync([n],t):n};for(;;){const e=c({...t,cwd:n});if(e===i)return;if(e)return r.resolve(n,e);if(n===s)return;n=r.dirname(n)}},e.exports.exists=s,e.exports.sync.exists=s.sync,e.exports.stop=i},function(e,t,n){"use strict";const r=n(0),o=n(1),{promisify:s}=n(2),i=n(9),a=s(o.stat),c=s(o.lstat),l={directory:"isDirectory",file:"isFile"};function u({type:e}){if(!(e in l))throw new Error(`Invalid type specified: ${e}`)}const f=(e,t)=>void 0===e||t[l[e]]();e.exports=async(e,t)=>{u(t={cwd:process.cwd(),type:"file",allowSymlinks:!0,...t});const n=t.allowSymlinks?a:c;return i(e,async e=>{try{const o=await n(r.resolve(t.cwd,e));return f(t.type,o)}catch(e){return!1}},t)},e.exports.sync=(e,t)=>{u(t={cwd:process.cwd(),allowSymlinks:!0,type:"file",...t});const n=t.allowSymlinks?o.statSync:o.lstatSync;for(const o of e)try{const e=n(r.resolve(t.cwd,o));if(f(t.type,e))return o}catch(e){}}},function(e,t,n){"use strict";const r=n(10);class o extends Error{constructor(e){super(),this.value=e}}const s=async(e,t)=>t(await e),i=async e=>{const t=await Promise.all(e);if(!0===t[1])throw new o(t[0]);return!1},a=async(e,t,n)=>{n={concurrency:1/0,preserveOrder:!0,...n};const a=r(n.concurrency),c=[...e].map(e=>[e,a(s,e,t)]),l=r(n.preserveOrder?1:1/0);try{await Promise.all(c.map(e=>l(i,e)))}catch(e){if(e instanceof o)return e.value;throw e}};e.exports=a,e.exports.default=a},function(e,t,n){"use strict";const r=n(11),o=e=>{if(e<1)throw new TypeError("Expected `concurrency` to be a number from 1 and up");const t=[];let n=0;const o=()=>{n--,t.length>0&&t.shift()()},s=(e,t,...s)=>{n++;const i=r(e,...s);t(i),i.then(o,o)},i=(r,...o)=>new Promise(i=>((r,o,...i)=>{n<e?s(r,o,...i):t.push(s.bind(null,r,o,...i))})(r,i,...o));return Object.defineProperties(i,{activeCount:{get:()=>n},pendingCount:{get:()=>t.length}}),i};e.exports=o,e.exports.default=o},function(e,t,n){"use strict";const r=(e,...t)=>new Promise(n=>{n(e(...t))});e.exports=r,e.exports.default=r},function(e,t,n){"use strict";const r=n(1),{promisify:o}=n(2),s=o(r.access);e.exports=async e=>{try{return await s(e),!0}catch(e){return!1}},e.exports.sync=e=>{try{return r.accessSync(e),!0}catch(e){return!1}}},function(e,t,n){var r,o;({readManifestSync:o}=n(4)),r=o("language-nsl"),e.exports={transpile:function(e){var t,o,s,i,a;if(({notifyOnSucess:o}=n(3)),({spawn:a}=n(14)),null!=(t=atom.workspace.getActiveTextEditor()))return i=t.getPath(),s=t.getGrammar().scopeName,null!=i&&s.startsWith("source.nsl")?t.save().then((function(){var t,n,r,s,c;r=["-jar",`${atom.config.get("language-nsl.pathToJar")}`],(n=atom.config.get("language-nsl.customArguments")).push(i),t=r.concat(n);try{e.clear()}catch(e){atom.config.get("language-nsl.clearConsole")&&console.clear()}return c=a("java",t),s=!1,c.stdout.on("data",(function(t){try{if(atom.config.get("language-nsl.alwaysShowOutput"))return e.log(t.toString())}catch(e){return console.log(t.toString())}})),c.stderr.on("data",(function(t){s=!0;try{return e.error(t.toString())}catch(e){return console.error(t.toString())}})),c.on("close",(function(e){if(0===e&&!1===s){if(atom.config.get("language-nsl.showBuildNotifications"))return o()}else if(atom.config.get("language-nsl.showBuildNotifications"))return atom.notifications.addError("Transpile failed",{dismissable:!1})}))})):atom.beep();atom.notifications.addWarning(`**${r.name}**: No active editor`,{dismissable:!1})}}},function(e,t){e.exports=require("child_process")}]);
//# sourceMappingURL=main.js.map